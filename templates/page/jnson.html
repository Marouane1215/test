<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordonnancement - Algorithme de Johnson</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-5">
    <h1 class="text-center mb-4">Ordonnancement des Jobs - Algorithme de Johnson</h1>

    <div class="mb-4">
        <h3>Présentation de l'Algorithme de Johnson</h3>
        <p>L'algorithme de Johnson est utilisé pour minimiser le temps total de traitement dans un atelier comportant exactement deux machines.
        Cette restriction est essentielle pour appliquer efficacement cet algorithme. Les tâches sont ordonnées en fonction des temps de
        préparation minimaux sur chaque machine, en attribuant les tâches les plus rapides en première position et les autres en dernière.
        La date d'arrivée est considérée comme nulle dans cet algorithme.</p>
    </div>

    <div class="mb-4 text-center">
        <img src="data:image/png;base64,{{ graph }}" alt="Diagramme de Gantt" class="img-fluid">
    </div>

    <div class="mb-4">
        <h3>Informations générales</h3>
        <ul class="list-group">

            <li class="list-group-item"><strong>Nombre de Jobs :</strong> {{ num_jobs }}</li>
            <li class="list-group-item"><strong>Nombre de Machines :</strong> 2 (Restriction imposée par l'algorithme de Johnson)</li>
            <li class="list-group-item"><strong>Temps total des Flow Times :</strong> {{ total_flow_time }}</li>
            <li class="list-group-item"><strong>Total des Retards :</strong> {{ total_retard }}</li>
            <li class="list-group-item"><strong>Retard Maximum :</strong> {{ max_retard }}</li>
            <li class="list-group-item"><strong>Temps de fin maximum (Cmax) :</strong> {{ cmax }}</li>
        </ul>
    </div>

    <div class="table-responsive">
        <h3>Résumé des Jobs</h3>
        <table class="table table-bordered table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">Job ID</th>
                <th scope="col">Date d'Arrivée</th>
                <th scope="col">Date de Livraison</th>
                <th scope="col">Flow Time</th>
                <th scope="col">Retard</th>
            </tr>
            </thead>
            <tbody>
            {% for job in combined_data %}
                <tr>
                    <td>{{ job.job_id }}</td>
                    <td>0</td>
                    <td>{{ job.delivery_date }}</td>
                    <td>{{ job.flow_time }}</td>
                    <td>{{ job.retard }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
